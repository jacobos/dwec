<html>

<head>
    <meta charset="utf-8">
    <script src="http://code.jquery.com/jquery-latest.min.js" type="text/javascript"></script>
    <style>
        img {
            float: left;
            width: 150px;
            height: 150px;
        }
        #granDiv {
            margin: 0 auto;
            width: 618px;
        }
        p {
            padding: 10px;
        }
        table a:link {
            color: #666;
            font-weight: bold;
            text-decoration: none;
        }
        table a:visited {
            color: #999999;
            font-weight: bold;
            text-decoration: none;
        }
        table a:active,
        table a:hover {
            color: #bd5a35;
            text-decoration: underline;
        }
        table {
            left: 5%;
            width: 30%;
            font-family: Arial, Helvetica, sans-serif;
            color: #666;
            text-shadow: 1px 1px 0px #fff;
            background: #eaebec;
            margin: 20px;
            border: #ccc 1px solid;
            -moz-border-radius: 3px;
            -webkit-border-radius: 3px;
            border-radius: 3px;
            -moz-box-shadow: 0 1px 2px #d1d1d1;
            -webkit-box-shadow: 0 1px 2px #d1d1d1;
            box-shadow: 0 1px 2px #d1d1d1;
        }
        table th {
            padding: 21px 25px 22px 25px;
            border-top: 1px solid #fafafa;
            border-bottom: 1px solid #e0e0e0;
            background: #ededed;
            background: -webkit-gradient(linear, left top, left bottom, from(#ededed), to(#ebebeb));
            background: -moz-linear-gradient(top, #ededed, #ebebeb);
        }
        table th:first-child {
            text-align: left;
            padding-left: 20px;
        }
        table tr:first-child th:first-child {
            -moz-border-radius-topleft: 3px;
            -webkit-border-top-left-radius: 3px;
            border-top-left-radius: 3px;
        }
        table tr:first-child th:last-child {
            -moz-border-radius-topright: 3px;
            -webkit-border-top-right-radius: 3px;
            border-top-right-radius: 3px;
        }
        table tr {
            text-align: center;
            padding-left: 20px;
        }
        table tr td:first-child {
            text-align: left;
            padding-left: 20px;
            border-left: 0;
        }
        table tr td {
            padding: 18px;
            border-top: 1px solid #ffffff;
            border-bottom: 1px solid #e0e0e0;
            border-left: 1px solid #e0e0e0;
            background: #fafafa;
            background: -webkit-gradient(linear, left top, left bottom, from(#fbfbfb), to(#fafafa));
            background: -moz-linear-gradient(top, #fbfbfb, #fafafa);
        }
        table tr.even td {
            background: #f6f6f6;
            background: -webkit-gradient(linear, left top, left bottom, from(#f8f8f8), to(#f6f6f6));
            background: -moz-linear-gradient(top, #f8f8f8, #f6f6f6);
        }
        table tr:last-child td {
            border-bottom: 0;
        }
        table tr:last-child td:first-child {
            -moz-border-radius-bottomleft: 3px;
            -webkit-border-bottom-left-radius: 3px;
            border-bottom-left-radius: 3px;
        }
        table tr:last-child td:last-child {
            -moz-border-radius-bottomright: 3px;
            -webkit-border-bottom-right-radius: 3px;
            border-bottom-right-radius: 3px;
        }
        table tr:hover td {
            background: #f2f2f2;
            background: -webkit-gradient(linear, left top, left bottom, from(#f2f2f2), to(#f0f0f0));
            background: -moz-linear-gradient(top, #f2f2f2, #f0f0f0);
        }
        .ticket{float:right;}
        }
    </style>
</head>

<body>

    <p>Choose something between 1 and 9
        <br>
        <input id="input1"></input>
        <input id="input2"></input>
        <button id="boton">Change</button>

    </p>
    <div id="granDiv">


    </div>
    <div class='ticket'>

    </div>
    <script>
if($("table").length == 0){
	crearTabla();
}
                   $.ajax('0001.php', {
                        success: function (response) {
                       		 $("#granDiv").append(response);
			    $("td").on("click", function() {
				var elThis = this;
				id3 = document.getElementById("td");
				input = document.createElement("input");
				input.setAttribute("type", "text");
				input.setAttribute("style", "position:absolute; left:500px; top:35px;");
				input.setAttribute("id", "input3");
				document.body.appendChild(input);
				boton = document.createElement("button");
				text2 = document.createTextNode("TEXT");
				boton.appendChild(text2);
				boton.setAttribute("style", "position:absolute; left:680px; top:35px;");
				document.body.appendChild(boton);

				boton.onclick = function boton3() {
				    num3 = document.getElementById("input3").value;
				    text3 = document.createTextNode(num3);
				    elThis.appendChild(text3);
				    input.parentNode.removeChild(input);
				    boton.parentNode.removeChild(boton);
				    contenido=$("#granDiv").html();
				    //contenido = contenido.replace(/\s/g, "");
				    alfa = JSON.stringify({a:contenido});
				    objeto = {json: contenido};
				    //console.log({a: JSON.stringify({a:contenido})});
				    console.log(contenido);
				    $.ajax('0001.php', {
				        success: function (response) {
				       		 $("#granDiv").append(response);                        },
				        data: {
					    a: contenido
					}
		/*{
				                numero:num3,
				                tabla:JSON.stringify(alfa

				                }
		 */                   });
				}

			    });
                        }
                   });
function crearTabla(){

var id,
    id2,
    id3,
    tabla1,
    tr,
    num,
    num2,
    i,
    a,
    text,
    text2,
    texto3,
    input,
    contenido,
    td;

id = document.getElementById("boton");
id2 = document.getElementById("granDiv");
id.onclick = function boton1() {
    num = document.getElementById("input1").value;
    num2 = document.getElementById("input2").value;
    tabla1 = document.createElement("table");
    tabla1.setAttribute("id","tabla1");
    id2.appendChild(tabla1);
    for (i = 0; i < num; i = i + 1) {
        tr = document.createElement("tr");
        tabla1.appendChild(tr);

        for (a = 0; a < num2; a = a + 1) {
            td = document.createElement("td");
            tr.appendChild(td);

            td.onclick = function boton2() {
                var elThis = this;
                id3 = document.getElementById("td");
                input = document.createElement("input");
                input.setAttribute("type", "text");
                input.setAttribute("style", "position:absolute; left:500px; top:35px;");
                input.setAttribute("id", "input3");
                id2.appendChild(input);
                boton = document.createElement("button");
                text2 = document.createTextNode("TEXT");
                boton.appendChild(text2);
                boton.setAttribute("style", "position:absolute; left:680px; top:35px;");
                id2.appendChild(boton);

                boton.onclick = function boton3() {
                    num3 = document.getElementById("input3").value;
                    text3 = document.createTextNode(num3);
                    elThis.appendChild(text3);
                    input.parentNode.removeChild(input);
                    boton.parentNode.removeChild(boton);
                    contenido=$("#granDiv").html();
		    //contenido = contenido.replace(/\s/g, "");
		    alfa = JSON.stringify({a:contenido});
		    objeto = {json: contenido};
		    //console.log({a: JSON.stringify({a:contenido})});
		    console.log(contenido);
		    $.ajax('apa.php', {
		        success: function (response) {
		       		 $("#granDiv").append(response);                        },
		        data: {
			    a: contenido
			}
		    });
                }

            }

        }
    }



}}

</script>
</body>
</html>
