<!DOCTYPE HTML>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<title>Canvas Example</title>
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
	<style>
		/* Added to show the edge of canvas */
		canvas {
			border: 1px solid black;
		}
	</style>
</head>

<body>
	<canvas id='canvasElem' width="600px" height="600px"></canvas>
	<script>
		var canvas = $('#canvasElem')[0],
			ctx = canvas.getContext('2d');
		var dt = 1 / 60;

		 // Skip the onload, image will be loaded by the time the user stamps anything
		var kirby = new Image();
		kirby.src = 'kirby.png';

		var enemyImg = ["kirby2.png", "kirby3.png"];

		var ranEnemy;

		var mouseX, mouseY;
		var enemies = [];
		var ax = 0,
			ay = 0;

		function getRandomImage() {
			var num = Math.floor(Math.random() * enemyImg.length);
			var img = enemyImg[num];
			return img;
		}

		function random(min, max) {
			return~~ (Math.random() * (max - min + 1)) + min
		}

		/*$(document).keydown(function (e) {
			var code = (e.keyCode ? e.keyCode : e.which);
			if (code == 40) { //Down
				mouseY += 10;
			} else if (code == 38) { //Up
				mouseY -= 10;
			} else if (code == 37) { //Left
				mouseX -= 10;
			} else if (code == 39) { //Right
				mouseX += 10;
			}
			animLoop();
		});*/

		function animLoop() {


			// Clear the canvas
			ctx.clearRect(0, 0, canvas.width, canvas.height);

			colides();

			for (i = 0; i < enemies.length; i++) {
				// Update the position and velocity
				enemy = enemies[i];

				ranEnemy = getRandomImage();

				var kirby2 = new Image();
				kirby2.src = getRandomImage();

				enemy.vx += ax * dt;
				enemy.vy += ay * dt;
				enemy.x += enemy.vx * dt;
				enemy.y += enemy.vy * dt;

				if (enemy.x < 1) {
					enemy.x = 1;
					enemy.vx *= -1;
				} else if (enemy.x > canvas.width - kirby2.width) {
					enemy.x = canvas.width - kirby2.width;
					enemy.vx *= -1;
				}

				if (enemy.y < 1) {
					enemy.y = 1;
					enemy.vy *= -1;
				} else if (enemy.y > canvas.height - kirby2.height) {
					enemy.vy *= -1;
				}

				ctx.drawImage(kirby2,
					enemy.x,
					enemy.y);

			}

			// Draw the little guy at the mouse position
			ctx.drawImage(kirby,
				mouseX - kirby.width / 2,
				mouseY - kirby.height / 2);

			setTimeout(animLoop, dt * 1000);

		}

		for (i = 0; i < 20; i++) {
			var enemy = {
				x: random(0, 550),
				y: random(0, 550),
				vx: random(-10, 10),
				vy: random(-10, 10),
			};
			enemies.push(enemy);

			animLoop();
		}

		function colides() {
			for (i = 0; i < enemies.length; i++) {
				if (mouseX < enemies[i].x + enemies[i].width &&
					mouseX + kirby.width > enemies[i].x &&
					mouseY < enemies[i].y + enemies[i].height &&
					mouseY + kirby.height > enemies[i].y) {}
			}
		}

		/*a.x < b.x + b.width &&
        a.x + a.width > b.x &&
        a.y < b.y + b.height &&
        a.y + a.height > b.y)*/


		$(canvas).on('mousemove', function (e) {
			mouseX = e.offsetX;
			mouseY = e.offsetY;
		});

		$(document).ready(function () {
			$(canvas).css({
				'cursor': 'none'
			});
		});

		animLoop();
	</script>
	<script src="https://code.jquery.com/jquery-1.11.1.min.js"></script>
</body>

</html>
